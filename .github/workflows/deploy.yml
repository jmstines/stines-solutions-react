
# name: Deploy to S3

# on:  
#   # runs after the "Terraform Deploy" workflow is completed
#   workflow_run:
#       workflows: ["Terraform Deploy"] 
#       types:
#         - completed

# jobs:
#   deploy:
#     runs-on: ubuntu-latest

#     strategy:
#       matrix:
#         node-version: [18.x]

#     steps:
#       - run: echo "üéâ The job was automatically triggered by a ${{ github.event_name }} event."
#       - run: echo "üêß This job is now running on a ${{ runner.os }} server hosted by GitHub!"
#       - run: echo "üîé The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}."
#       - name: Checkout code
#         uses: actions/checkout@v3

#       - run: echo "üí° The ${{ github.repository }} repository has been cloned to the runner."
#       - run: echo "üñ•Ô∏è The workflow is now ready to test your code on the runner."
      
#       - name: Set up Node.js ${{ matrix.node-version }}
#         uses: actions/setup-node@v3
#         with:
#           node-version: ${{ matrix.node-version }}
#           cache: 'npm'

#       - name: Install dependencies
#         run: npm install

#       - name: Build project
#         run: npm run build   # This creates the /dist folder

#       - name: List full path and file names in the /dist folder
#         run: find ${{ github.workspace }}/dist -type f
#       - run: echo "üçè This job's status is ${{ job.status }}."
      
#       - name: Configure AWS credentials
#         uses: aws-actions/configure-aws-credentials@v4
#         with:
#           aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
#           aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
#           aws-region: us-east-1

#       - name: Deploy to S3
#         run: aws s3 sync ./dist s3://stinessolutions.com --delete

#       # - name: Invalidate CloudFront cache
#       #   run: |
#       #     aws cloudfront create-invalidation \
#       #       --distribution-id ${{ secrets.CLOUDFRONT_DISTRIBUTION_ID }} \
#       #       --paths "/*"
